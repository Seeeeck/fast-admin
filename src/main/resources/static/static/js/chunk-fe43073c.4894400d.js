(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fe43073c","chunk-607da3d7"],{2011:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.dataForm}},[a("el-form-item",[e.auth.create?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOrUpdateHandle()}}},[e._v("Add")]):e._e()],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,"row-key":"id",border:""}},[a("el-table-column",{attrs:{prop:"name","header-align":"center","min-width":"150",label:"Name"}}),a("el-table-column",{attrs:{prop:"parentName","header-align":"center",align:"center",width:"120",label:"Parent Menu"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",width:"60",label:"Icon"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("svg-icon",{attrs:{"icon-class":e.row.icon||""}})]}}])}),a("el-table-column",{attrs:{prop:"type","header-align":"center",width:"100",align:"center",label:"Type"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.type?a("el-tag",{attrs:{size:"small"}},[e._v("Catelog")]):1===t.row.type?a("el-tag",{attrs:{size:"small",type:"success"}},[e._v("Menu")]):2===t.row.type?a("el-tag",{attrs:{size:"small",type:"info"}},[e._v("Button")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"orderNum","header-align":"center",width:"80",align:"center",label:"Order"}}),a("el-table-column",{attrs:{prop:"path","header-align":"center",align:"center",width:"150","show-overflow-tooltip":"",label:"Menu path"}}),a("el-table-column",{attrs:{prop:"perms","header-align":"center",align:"center","min-width":"150","show-overflow-tooltip":"",label:"Permission"}}),a("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"150",label:"Operation"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.auth.update?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.addOrUpdateHandle(t.row.id)}}},[e._v("Update")]):e._e(),!e.auth.delete||t.row.children&&t.row.children.length>0?e._e():a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteHandle(t.row.id)}}},[e._v("Delete")])]}}])})],1),e.addOrUpdateVisible?a("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:e.getDataList}}):e._e()],1)},r=[],o=a("5f87"),i=a("7c67"),s=a("5b64"),d={components:{AddOrUpdate:i["default"]},data:function(){return{dataForm:{},dataList:[],dataListLoading:!1,addOrUpdateVisible:!1,auth:{read:this.isAuth("sys:menu:tree"),create:this.isAuth("sys:menu:save"),update:this.isAuth("sys:menu:update"),delete:this.isAuth("sys:menu:delete")}}},created:function(){this.getDataList()},methods:{getDataList:function(){var e=this;this.auth.read?(this.dataListLoading=!0,Object(s["c"])({op:"all"}).then((function(t){e.dataList=t.data,e.dataListLoading=!1})).catch((function(){return e.dataListLoading=!1}))):this.$message.error("You don't have required permission to perform this action.")},addOrUpdateHandle:function(e){var t=this;this.addOrUpdateVisible=!0,this.$nextTick((function(){t.$refs.addOrUpdate.init(e)}))},deleteHandle:function(e){var t=this;this.$confirm("Do you want to delete [id=".concat(e,"]?"),"Delete",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then((function(){Object(s["a"])(e).then((function(e){t.$message({message:"Success",type:"success",duration:1e3,onClose:function(){t.getDataList()}})})).catch((function(){}))})).catch((function(){}))},isAuth:o["b"]}},l=d,c=a("2877"),u=Object(c["a"])(l,n,r,!1,null,null,null);t["default"]=u.exports},"5b64":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return d}));var n=a("b775");function r(e){return Object(n["a"])({url:"/sys/menu/"+e,method:"get"})}function o(e){return Object(n["a"])({url:"/sys/menu",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/sys/menu",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/sys/menu/"+e,method:"delete"})}function d(e){return Object(n["a"])({url:"/sys/menu/tree",method:"get",params:e})}},"5fce":function(e,t,a){var n={"./captcha.svg":"08e8","./dashboard.svg":"f782","./example.svg":"30c3","./eye-open.svg":"d7ec","./eye.svg":"4df5","./form.svg":"eb1b","./link.svg":"18f0","./log.svg":"fea0","./menu.svg":"bd3d","./nested.svg":"dcf8","./password.svg":"2a3d","./role.svg":"520c","./sys.svg":"7213","./table.svg":"47f1","./timer.svg":"4e0b","./tree.svg":"93cd","./user.svg":"b3b5"};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="5fce"},"6e63":function(e,t,a){},"7c67":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.dataForm.id?"Update":"Add","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"140px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmit()}}},[a("el-form-item",{attrs:{label:"Type",prop:"type"}},[a("el-radio-group",{attrs:{disabled:0!==e.dataForm.id},model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}},e._l(e.typeList,(function(t,n){return a("el-radio",{key:n,attrs:{label:n}},[e._v(e._s(t))])})),1)],1),a("el-form-item",{attrs:{label:e.typeList[e.dataForm.type]+" name",prop:"name"}},[a("el-input",{attrs:{placeholder:e.typeList[e.dataForm.type]+" name"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1),a("el-form-item",{attrs:{label:"Parent menu",prop:"parentName"}},[a("el-popover",{ref:"menuListPopover",attrs:{placement:"bottom-start",trigger:"click"}},[a("el-tree",{ref:"menuListTree",attrs:{data:e.menuList,props:e.menuListTreeProps,"node-key":"id","default-expand-all":!0,"highlight-current":!0,"expand-on-click-node":!1},on:{"current-change":e.menuListTreeCurrentChangeHandle}})],1),a("el-input",{directives:[{name:"popover",rawName:"v-popover:menuListPopover",arg:"menuListPopover"}],staticClass:"menu-list__input",attrs:{readonly:!0,placeholder:"Select the parent menu"},model:{value:e.dataForm.parentName,callback:function(t){e.$set(e.dataForm,"parentName",t)},expression:"dataForm.parentName"}})],1),2!==e.dataForm.type?a("el-form-item",{attrs:{label:"Menu path",prop:"path"}},[a("el-input",{attrs:{placeholder:"Menu path"},model:{value:e.dataForm.path,callback:function(t){e.$set(e.dataForm,"path",t)},expression:"dataForm.path"}})],1):e._e(),2===e.dataForm.type?a("el-form-item",{attrs:{label:"Permission",prop:"perms"}},[a("el-input",{attrs:{placeholder:"Multiple separated by comma, E.g: sys:user:page,sys:user:save"},model:{value:e.dataForm.perms,callback:function(t){e.$set(e.dataForm,"perms",t)},expression:"dataForm.perms"}})],1):e._e(),a("el-form-item",{attrs:{label:"Order number",prop:"orderNum"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,label:"Order number"},model:{value:e.dataForm.orderNum,callback:function(t){e.$set(e.dataForm,"orderNum",t)},expression:"dataForm.orderNum"}})],1),2!==e.dataForm.type?a("el-form-item",{attrs:{label:"Whether to hidden"}},[a("el-switch",{model:{value:e.dataForm.hidden,callback:function(t){e.$set(e.dataForm,"hidden",t)},expression:"dataForm.hidden"}})],1):e._e(),2!==e.dataForm.type?a("el-form-item",{attrs:{label:"Menu icon",prop:"icon"}},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-popover",{ref:"iconListPopover",attrs:{placement:"bottom-start",trigger:"click","popper-class":"mod-menu__icon-popover"}},[a("div",{staticClass:"mod-menu__icon-inner"},[a("div",{staticClass:"mod-menu__icon-list"},e._l(e.iconList,(function(t,n){return a("el-button",{key:n,class:{"is-active":t===e.dataForm.icon},on:{click:function(a){return e.iconActiveHandle(t)}}},[a("svg-icon",{attrs:{"icon-class":t}})],1)})),1)])]),a("el-input",{directives:[{name:"popover",rawName:"v-popover:iconListPopover",arg:"iconListPopover"}],staticClass:"icon-list__input",attrs:{readonly:!0,placeholder:"Menu icon"},model:{value:e.dataForm.icon,callback:function(t){e.$set(e.dataForm,"icon",t)},expression:"dataForm.icon"}})],1),a("el-col",{staticClass:"icon-list__tips",attrs:{span:2}},[a("el-tooltip",{attrs:{placement:"top",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("Recommend using SVG files, please see "),a("a",{attrs:{href:"https://github.com/Seeeeck/fast-admin-vue/blob/master/README.md",target:"_blank"}},[e._v("fast-admin-vue")]),e._v(" for details")]),a("i",{staticClass:"el-icon-warning"})])],1)],1)],1):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmit()}}},[e._v("Ok")])],1)],1)},r=[],o=(a("d81d"),a("d3b7"),a("ddb0"),a("b0c0"),a("5b64")),i={data:function(){var e=this,t=function(t,a,n){1!==e.dataForm.type||/\S/.test(a)?n():n(new Error("Menu path cannot be empty."))};return{visible:!1,typeList:["Catalog","Menu","Button"],dataForm:{id:0,type:1,name:"",parentId:0,parentName:"",path:"",perms:"",orderNum:0,icon:"",hidden:!1},iconList:[],dataRule:{name:[{required:!0,message:"Menu name cannot be empty",trigger:"blur"}],parentName:[{required:!0,message:"Parent menu cannot be empty",trigger:"change"}],path:[{validator:t,trigger:"blur"}]},menuList:[{id:0,name:"Top menu",children:[]}],menuListTreeProps:{label:"name",children:"children"}}},mounted:function(){this.iconList=a("5fce").keys().map((function(e){return e.substring(2,e.length-4)}))},methods:{init:function(e){var t=this;this.dataForm.id=e||0,Object(o["c"])({op:"less",noButtonType:!0}).then((function(a){t.visible=!0,t.menuList[0].children=a.data,t.$nextTick((function(){t.$refs["dataForm"].resetFields(),t.dataForm.id?Object(o["b"])(e).then((function(e){t.dataForm.id=e.data.id,t.dataForm.type=e.data.type,t.dataForm.name=e.data.name,t.dataForm.parentId=e.data.parentId,t.dataForm.path=e.data.path,t.dataForm.perms=e.data.perms,t.dataForm.orderNum=e.data.orderNum,t.dataForm.icon=e.data.icon,t.menuListTreeSetCurrentNode()})):t.menuListTreeSetCurrentNode()}))}))},menuListTreeCurrentChangeHandle:function(e,t){var a=this;this.dataForm.parentId=e.id,this.dataForm.parentName=e.name,Object(o["b"])(e.id).then((function(e){e.data&&e.data.path?a.dataForm.path=e.data.path+"/":a.dataForm.path=""})).catch((function(){}))},menuListTreeSetCurrentNode:function(){this.$refs.menuListTree.setCurrentKey(this.dataForm.parentId),this.dataForm.parentName=(this.$refs.menuListTree.getCurrentNode()||{})["name"]},iconActiveHandle:function(e){this.dataForm.icon=e},dataFormSubmit:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){var a={id:e.dataForm.id||void 0,type:e.dataForm.type,name:e.dataForm.name,parentId:e.dataForm.parentId,orderNum:e.dataForm.orderNum};0===e.dataForm.type||1===e.dataForm.type?(a.icon=e.dataForm.icon,a.hidden=e.dataForm.hidden,a.path=e.dataForm.path):(a.perms=e.dataForm.perms,a.hidden=!0),e.dataForm.id?Object(o["e"])(a).then((function(){e.$message({message:"Success",type:"success",duration:1e3,onClose:function(){e.visible=!1,e.$emit("refreshDataList")}})})).catch((function(){})):Object(o["d"])(a).then((function(){e.$message({message:"Success",type:"success",duration:1e3,onClose:function(){e.visible=!1,e.$emit("refreshDataList")}})})).catch((function(){}))}}))}}},s=i,d=(a("e675"),a("2877")),l=Object(d["a"])(s,n,r,!1,null,null,null);t["default"]=l.exports},e675:function(e,t,a){"use strict";a("6e63")}}]);